<odoo>
  <data>

    <record model="ir.ui.view" id="domestico_account_move_form_inherit">
      <field name="name">domestico.account.move.form.inherit</field>
      <field name="model">account.move</field>
      <field name="inherit_id" ref="account.view_move_form"/>
      <field name="arch" type="xml">

        <xpath expr="//group[@id='header_right_group']" position="inside">
          <field name="pricelist_id" options="{'no_create': True, 'no_edit': True}"/>
        </xpath>

        <xpath expr="//field[@name='invoice_line_ids']//tree//field[@name='price_unit']" position="attributes">
          <attribute name="readonly">1</attribute>
        </xpath>

        <xpath expr="//field[@name='payment_reference']" position="attributes">
          <attribute name="invisible">1</attribute>
        </xpath>

        <xpath expr="//field[@name='invoice_line_ids']//tree" position="replace">
          <tree editable="bottom" string="Journal Items" default_order="sequence, id">
            <control>
              <create name="add_line_control" string="Add a line"/>
              <create name="add_section_control" string="Add a section" context="{'default_display_type': 'line_section'}"/>
              <create name="add_note_control" string="Add a note" context="{'default_display_type': 'line_note'}"/>
            </control>

            <!-- Displayed fields -->
            <field name="sequence" widget="handle"/>
            <field name="product_id" optional="show" domain="                                                     context.get('default_move_type') in ('out_invoice', 'out_refund', 'out_receipt')                                                     and [('sale_ok', '=', True), '|', ('company_id', '=', False), ('company_id', '=', parent.company_id)]                                                     or [('purchase_ok', '=', True), '|', ('company_id', '=', False), ('company_id', '=', parent.company_id)]                                                "/>
            <field name="name" widget="section_and_note_text" optional="show"/>
            <field name="account_id" context="{'partner_id': partner_id, 'move_type': parent.move_type}" groups="account.group_account_readonly" options="{'no_create': True}" domain="[('deprecated', '=', False), ('account_type', 'not in', ('asset_receivable', 'liability_payable')), ('company_id', '=', parent.company_id), ('is_off_balance', '=', False)]" attrs="{'required': [('display_type', 'not in', ('line_note', 'line_section'))]}"/>
            <field name="analytic_distribution" widget="analytic_distribution" groups="analytic.group_analytic_accounting" optional="show" options="{'product_field': 'product_id', 'account_field': 'account_id'}" business_domain_compute="parent.move_type in ['out_invoice', 'out_refund', 'out_receipt'] and 'invoice' or parent.move_type in ['in_invoice', 'in_refund', 'in_receipt'] and 'bill' or 'general'"/>
            <field name="quantity" optional="show"/>
            <field name="product_uom_category_id" invisible="1"/>
            <field name="product_uom_id" string="UoM" groups="uom.group_uom" optional="show"/>
            <field name="price_percent" />
            <field name="product_percent" />
            <field name="price_unit" string="Precio unitario"/>
            <field name="discount" string="Disc.%" optional="hide"/>
            <field name="tax_ids" widget="many2many_tags" domain="[('type_tax_use', '=?', parent.invoice_filter_type_domain), ('company_id', '=', parent.company_id), ('country_id', '=', parent.tax_country_id)]" context="{'append_type_to_tax_name': not parent.invoice_filter_type_domain}" options="{'no_create': True}" optional="show"/>
            <field name="price_subtotal" string="Subtotal" groups="account.group_show_line_subtotals_tax_excluded"/>
            <field name="price_total" string="Total" groups="account.group_show_line_subtotals_tax_included"/>

            <!-- Others fields -->
            <field name="partner_id" invisible="1"/>
            <field name="currency_id" invisible="1"/>
            <field name="company_id" invisible="1"/>
            <field name="company_currency_id" invisible="1"/>
            <field name="display_type" force_save="1" invisible="1"/>
            <!-- /l10n_in_edi.test_edi_json -->
            <!-- required for @api.onchange('product_id') -->
            <field name="product_uom_id" invisible="1"/>
          </tree>
        </xpath>

      </field>
    </record>

    <record id="domestico_account_move_list_inherit_account_move" model="ir.ui.view">
      <field name="name">account.move.view.list.inherit</field>
      <field name="model">account.move</field>
      <field name="inherit_id" ref="account.view_out_invoice_tree"/>
      <field name="arch" type="xml">

        <xpath expr="//field[@name='amount_total_signed']" position="after">
          <field name="amount_weekly" sum="Total" />
        </xpath>

      </field>
    </record>

    <record id="domestico_account_move_search_inherit_account_move" model="ir.ui.view">
      <field name="name">account.move.view.search.inherit</field>
      <field name="model">account.move</field>
      <field name="inherit_id" ref="account.view_account_invoice_filter"/>
      <field name="arch" type="xml">

        <xpath expr="//group//filter[@name='salesperson']" position="after">
          <filter name="partner_id" string="Cliente" context="{'group_by': 'partner_id'}" />
        </xpath>

      </field>
    </record>

  </data>
</odoo>